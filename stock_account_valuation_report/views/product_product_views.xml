<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stock_product_valuation" model="ir.ui.view">
        <field name="name">product.stock.valuation</field>
        <field name="model">product.product</field>
        <field name="arch" type="xml">
            <tree>
                <field name="display_name"/>
                <field name="qty_at_date"/>
                <field name="uom_id" groups="product.group_uom"/>
                <field name="currency_id" invisible="1"/>
                <field name="stock_value" sum="Stock Valuation" widget="monetary" options="{'currency_field': 'cost_currency_id'}"/>
                <button name="action_view_stock_moves"
                        type="object" icon="fa-info-circle"
                        attrs="{'invisible': [('cost_method', '!=', 'real')]}" />
                <field name="account_qty_at_date" sum="Accounting Qty"
                       attrs="{'invisible': [('valuation', '!=', 'real_time')]}"/>
                <field name="account_value"
                       sum="Accounting Valuation"
                       widget="monetary"
                       attrs="{'invisible': [('valuation', '!=', 'real_time')]}"/>
                <button name="action_view_amls"
                        type="object" icon="fa-info-circle"
                        attrs="{'invisible': [('valuation', '!=', 'real_time')]}" />
                <field name="cost_method" invisible="1"/>
                <field name="valuation" invisible="1"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="open_inventory_valuation">
        <field name="name">Dual Inventory Valuation</field>
        <field name="res_model">product.product</field>
        <field name="view_type">form</field>
        <field name="domain">[('type', '=', 'product'), ('qty_available', '!=', 0)]</field>
        <field name="view_mode">tree,form,graph</field>
        <field name="view_id" ref="view_stock_product_valuation"/>
        <field name="help">This analysis gives you a fast overview on the current stock level of your products and their current inventory value.</field>
    </record>

    <menuitem id="menu_inventory_valuation" name="Dual Inventory Valuation"
     parent="stock.menu_warehouse_report" sequence="99" action="open_inventory_valuation"/>

</odoo>
